<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>table-fork</title>
</head>
<body>

<table x:str="" cellpadding="0" cellspacing="0" width="1357" style="width: 828px;">
    <colgroup>
        <col width="65" span="3" style="width:65px"/>
        <col width="96" style=";width:96px"/>
        <col width="86" style=";width:87px"/>
        <col width="339" style=";width:339px"/>
        <col width="130" style=";width:131px"/>
        <col width="65" span="2" style="width:65px"/>
        <col width="65" style="width:65px"/>
        <col width="65" span="2" style="width:65px"/>
        <col width="118" style=";width:117px"/>
        <col width="65" style="width:65px"/>
    </colgroup>
    <tbody>
        <tr height="32" style="height:32px" class="firstRow">
            <td height="32" width="65" x:num="">
                363
            </td>
            <td width="65" style="border-left-style: none;">
                major
            </td>
            <td rowspan="2" width="65" style="border-bottom-width: 1px; border-bottom-color: black;">
                资源配置
            </td>
            <td width="96" style="border-left-style: none;">
                ip地址库管理
            </td>
            <td width="87" style="border-left-style: none;"></td>
            <td width="339" style="border-left-style: none;">
                IP地址添加页面，“所属市”、“运行商”、“接入方式”默认请给“请选择”状态
            </td>
            <td width="131" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;">
                hysun
            </td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;">
                前端
            </td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="117" style="border-left-style: none;"></td>
            <td width="65" style=""></td>
        </tr>
        <tr height="19" style="height:19px">
            <td height="19" style="border-top-style: none;" x:num="">
                364
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td style="border-top:none;border-left:none">
                节点管理
            </td>
            <td width="87" style="border-top-style: none; border-left-style: none;">
                设备管理
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                设备管理列表中，故障的设备状态列显示为空
            </td>
            <td style="border-top:none;border-left:none">
                请显示状态为“故障”
            </td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;">
                前端
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="19" style="height:19px">
            <td height="19" style="border-top-style: none;" x:num="">
                365
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td rowspan="2" style="border-bottom-width: 1px;border-bottom-color: black;border-top-style: none">
                溯源评估
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="87" style="border-top-style: none; border-left-style: none;"></td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                回源次数评估、回吐成功率查询条件“显示类型”去掉
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;">
                前端
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="32" style="height:32px">
            <td height="32" style="border-top-style: none;" x:num="">
                366
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="87" style="border-top-style: none; border-left-style: none;"></td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                回源次数评估、回吐成功率、回源占比分析、PPS重定向评估的折线图纵坐标请从0开始，不要展示负值
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;">
                前端
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
    </tbody>
</table>
<p>
    <br/>
</p>
<table x:str="" cellpadding="0" cellspacing="0" width="1357" style="width: 828px;">
    <colgroup>
        <col width="65" span="3" style="width:65px"/>
        <col width="96" style=";width:96px"/>
        <col width="86" style=";width:87px"/>
        <col width="339" style=";width:339px"/>
        <col width="130" style=";width:131px"/>
        <col width="65" span="2" style="width:65px"/>
        <col width="65" style="width:65px"/>
        <col width="65" span="2" style="width:65px"/>
        <col width="118" style=";width:117px"/>
        <col width="65" style="width:65px"/>
    </colgroup>
    <tbody>
        <tr height="19" style="height:19px" class="firstRow">
            <td height="19" width="65" x:num="">
                367
            </td>
            <td width="65" style="border-left-style: none;">
                major
            </td>
            <td rowspan="6" width="65" style="">
                资源配置
            </td>
            <td rowspan="6" width="96" style="">
                内容管理
            </td>
            <td rowspan="5" width="87" style="border-bottom-width: 1px; border-bottom-color: black;">
                内容查询
            </td>
            <td width="339" style="border-left-style: none;">
                去掉查询条件“状态”
            </td>
            <td width="131" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;">
                hysun
            </td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="65" style="border-left-style: none;"></td>
            <td width="117" style="border-left-style: none;"></td>
            <td width="65" style=""></td>
        </tr>
        <tr height="19" style="height:19px">
            <td height="19" style="border-top-style: none;" x:num="">
                368
            </td>
            <td style="border-top:none;border-left:none">
                critical
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                按“内容标识”进行查询，查询无效
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="19" style="height:19px">
            <td height="19" style="border-top-style: none;" x:num="">
                369
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                查询字段太挤，请调整页面样式
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="19" style="height:19px">
            <td height="19" style="border-top-style: none;" x:num="">
                370
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                查询字段“内容标示”改为“内容标识”
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="48" style="height:48px">
            <td height="48" style="border-top-style: none;" x:num="">
                372
            </td>
            <td style="border-top:none;border-left:none">
                critical
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                内容查询列表“文件大小”的值不正确（写成固定的了）；“服务流量”请加上单位；<span style="">“设备ip”列的内容没有给出</span>
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="32" style="height:32px">
            <td height="32" style="border-top-style: none;" x:num="">
                373
            </td>
            <td style="border-top:none;border-left:none">
                critical
            </td>
            <td width="87" style="border-top-style: none; border-left-style: none;">
                内容注入、分发
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                内容注入、分发列表请加上一列“注入状态”
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="32" style="height:32px">
            <td height="32" style="border-top-style: none;" x:num="">
                374
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td rowspan="2" style="border-top:none">
                数据分析
            </td>
            <td rowspan="2" style="border-bottom-width: 1px;border-bottom-color: black;border-top-style: none">
                其他统计
            </td>
            <td width="87" style="border-top-style: none; border-left-style: none;">
                请求对象大小统计
            </td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                饼图以及图例上的文件大小没有展示出来，请将Slice换成“0-10k”、“10-100k”等文件大小显示
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="32" style="height:32px">
            <td height="32" style="border-top-style: none;" x:num="">
                375
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td width="87" style="border-top-style: none; border-left-style: none;"></td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                按文件类型\文件大小进行查询后，流量及点击次数统计不正确
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td></td>
        </tr>
        <tr height="32" style="height:32px">
            <td height="32" style="border-top-style: none;" x:num="">
                376
            </td>
            <td style="border-top:none;border-left:none">
                major
            </td>
            <td style="border-left:none">
                监控告警
            </td>
            <td style="border-top:none;border-left:none">
                设备监控
            </td>
            <td width="87" style="border-top-style: none; border-left-style: none;"></td>
            <td width="339" style="border-top-style: none; border-left-style: none;">
                获取磁盘占用空间及后面的5个模块，默认不能显示图表
            </td>
            <td width="131" style="border-top-style: none; border-left-style: none;">
                默认请显示所有设备的累加信息
            </td>
            <td style="border-top:none;border-left:none">
                hysun
            </td>
            <td style="border-top:none;border-left:none"></td>
            <td width="65" style="border-top-style: none; border-left-style: none;"></td>
            <td style="border-top:none;border-left:none"></td>
            <td style="border-top:none;border-left:none"></td>
            <td width="117" style="border-top-style: none; border-left-style: none;"></td>
            <td></td>
        </tr>
    </tbody>
</table>
<p>
    <br/>
</p>

<script>
    var list = [];

    var tables = document.getElementsByTagName('table');

    for (var i = 0; i < tables.length; i++) {
        (function (t) {
            var tr = t.getElementsByTagName('tr');
            for (var i = 0; i < tr.length; i++) {
                var td = tr[i].children;
                for (var j = 0; j < td.length; j++) {
                    var n = td[j].getAttribute( 'rowspan' ) | 0;
                    if (n > 1) {
                        td[j].setAttribute('rowspan', 1);
                        while(--n){
                            var ntd = document.createElement('td');
                            ntd.innerHTML = td[j].innerHTML;
                            tr[i+n].insertBefore( ntd, tr[i+n].children[j] );
                        }
                    }
                }
                list.push({
                    priority: td[1].innerText.match(/critical/) ? 2 : 1,
                    content: td[0].innerText + '. [' + td[2].innerText + '-' + td[3].innerText + '-' + td[4].innerText + '] ' + td[5].innerText,
                    description: '#期望 \n' + td[6].innerText 
                        + '\n\n#提交人 \n' + td[7].innerText
                        + '\n\n#修复人 \n' + td[8].innerText
                        + '\n\n#问题区分 \n' + td[9].innerText
                        + '\n\n#备注 \n' + td[12].innerText + '\n' + (td[13] ? td[13].innerText : '')
                });
            }
        })(tables[i]);
    }

    console.log( JSON.stringify( list ) );
    /*
    len = 0; setInterval(function(){ if(len<list.length){$.post('https://coding.net/api/user/shy2850/project/net-east-cdn/task',$.extend(list[len],{owner_id:2736}));} len++;},3000);
    */

</script>
</body>
</html>